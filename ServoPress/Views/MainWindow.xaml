<Window x:Class="ServoPress.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:views="clr-namespace:ServoPress.Views"
        mc:Ignorable="d"
        Title="伺服压机控制系统 V1.0" 
        Height="950" Width="1280"
        WindowStartupLocation="CenterScreen"
        Background="White">
    <Window.Resources>

        <!-- 覆盖顶部状态栏的 TextBlock 样式 (白色字体) -->
        <Style x:Key="TopBarTextStyle" TargetType="TextBlock" BasedOn="{StaticResource {x:Type TextBlock}}">
            <Setter Property="Foreground" Value="White"/>
        </Style>
        <Style x:Key="TopBarLabelStyle" TargetType="TextBlock" BasedOn="{StaticResource {x:Type TextBlock}}">
            <Setter Property="Foreground" Value="#FFD0D0D0"/>
        </Style>

    </Window.Resources>

    <!-- 
    ====================================================================
    主布局 Grid
    ====================================================================
    -->
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- 顶部状态栏 -->
            <RowDefinition Height="*"/>
            <!-- 主内容区 -->
        </Grid.RowDefinitions>

        <!-- 1. 顶部状态栏 (已修改) -->
        <Border Grid.Row="0" Background="#FF007ACC" Padding="10,5" BorderBrush="#FF005A9E" BorderThickness="0,0,0,2">
            <!-- ... 顶部状态栏 ... (文本样式已覆盖) -->
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <!-- 移除了原有的 Auto 列 (用于OK/NOK) -->
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <TextBlock Text="系统状态:" FontSize="16" VerticalAlignment="Center" Style="{StaticResource TopBarLabelStyle}"/>
                    <TextBlock Text="运行中" FontSize="16" VerticalAlignment="Center" Foreground="#FF90EE90" Margin="10,0"/>
                    <!-- 浅绿色 -->
                    <TextBlock Text="程序号:" FontSize="16" VerticalAlignment="Center" Style="{StaticResource TopBarLabelStyle}" Margin="30,0,0,0"/>
                    <TextBlock Text="MP101_PartA" FontSize="16" VerticalAlignment="Center" Style="{StaticResource TopBarTextStyle}" Margin="10,0"/>
                </StackPanel>

                <!-- Logo 或标题 -->
                <TextBlock Grid.Column="1" Text="伺服压机智能控制系统" FontSize="20" FontWeight="Bold" HorizontalAlignment="Center" VerticalAlignment="Center" Style="{StaticResource TopBarTextStyle}"/>

                <!-- 最终判定结果 (OK/NOK) - 已从此移除 -->

            </Grid>
        </Border>

        <!-- 2. 主内容区 -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <!-- 左侧导航栏 -->
                <ColumnDefinition Width="*"/>
                <!-- 右侧内容区 -->
            </Grid.ColumnDefinitions>

            <!-- 2.1. 左侧导航栏 (已修改背景) -->
            <Border Grid.Column="0" Background="#FFFAFAFA" BorderBrush="#FFD0D0D0" BorderThickness="0,0,1,0">
                <ListBox x:Name="NavListBox"
                         BorderThickness="0"
                         Background="Transparent"
                         Width="220"
                         ItemContainerStyle="{StaticResource NavButtonStyle}"
                         SelectedIndex="0">
                    <!-- 
                    ItemContainerStyle 引用了 NavButtonStyle，
                    该样式现在定义在 App.xaml 中
                    -->
                    <ListBoxItem>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="🏠" FontSize="20" Margin="0,0,15,0" VerticalAlignment="Center"/>
                            <TextBlock Text="实时生产" VerticalAlignment="Center"/>
                        </StackPanel>
                    </ListBoxItem>
                    <ListBoxItem>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="🔧" FontSize="20" Margin="0,0,15,0" VerticalAlignment="Center"/>
                            <TextBlock Text="参数设置" VerticalAlignment="Center"/>
                        </StackPanel>
                    </ListBoxItem>
                    <ListBoxItem>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="📊" FontSize="20" Margin="0,0,15,0" VerticalAlignment="Center"/>
                            <TextBlock Text="历史数据" VerticalAlignment="Center"/>
                        </StackPanel>
                    </ListBoxItem>
                    <ListBoxItem>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="⚙️" FontSize="20" Margin="0,0,15,0" VerticalAlignment="Center"/>
                            <TextBlock Text="系统管理" VerticalAlignment="Center"/>
                        </StackPanel>
                    </ListBoxItem>
                </ListBox>
            </Border>

            <!-- 2.2. 右侧内容区 (保持不变) -->
            <TabControl Grid.Column="1"
                        x:Name="MainContentTabs"
                        Background="Transparent"
                        BorderThickness="0"
                        TabStripPlacement="Left"
                        SelectedIndex="{Binding ElementName=NavListBox, Path=SelectedIndex}">

                <!-- 隐藏 TabControl 的标签头 -->
                <TabControl.ItemContainerStyle>
                    <Style TargetType="TabItem">
                        <Setter Property="Visibility" Value="Collapsed"/>
                    </Style>
                </TabControl.ItemContainerStyle>

                <TabItem Header="主页">
                    <views:ProductionView />
                </TabItem>

                <TabItem Header="参数设置">
                    <views:SettingsView />
                </TabItem>

                <TabItem Header="历史数据">
                    <views:HistoryView />
                </TabItem>

                <TabItem Header="系统管理">
                    <views:SystemAdminView />
                </TabItem>

            </TabControl>
        </Grid>
    </Grid>
</Window>