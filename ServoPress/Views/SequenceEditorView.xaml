<UserControl x:Class="ServoPress.Views.SequenceEditorView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:ServoPress.Models"
             mc:Ignorable="d" 
             d:DesignHeight="700" d:DesignWidth="1050">
    <!-- 
    子界面 2: 序列编辑器
    -->
    <Grid Margin="10">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1.5*"/>
            <!-- 序列步骤列表 -->
            <ColumnDefinition Width="1*"/>
            <!-- 步骤详情编辑 -->
        </Grid.ColumnDefinitions>

        <!-- 序列步骤列表 -->
        <GroupBox Grid.Column="0" Header="压装序列 (MP101_PartA)">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <DataGrid Grid.Row="0">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="步号" Binding="{Binding Step}" Width="Auto"/>
                        <DataGridTextColumn Header="命令 (元素)" Binding="{Binding Command}" Width="*"/>
                        <DataGridTextColumn Header="参数" Binding="{Binding Params}" Width="2*"/>
                    </DataGrid.Columns>
                    <!-- 示例数据 -->
                    <DataGrid.ItemsSource>
                        <x:Array Type="{x:Type local:SequenceStep}">
                            <local:SequenceStep Step="1" Command="MEASURE START" Params=""/>
                            <local:SequenceStep Step="2" Command="MOTION (位移控)" Params="目标: 62.00 mm, 保护力: 1000 N"/>
                            <local:SequenceStep Step="3" Command="MOTION (压力控)" Params="目标: 68.00 mm, 触发力: 400 N"/>
                            <local:SequenceStep Step="4" Command="TIMER" Params="延时: 500 ms"/>
                            <local:SequenceStep Step="5" Command="MEASURE STOP" Params=""/>
                            <local:SequenceStep Step="6" Command="HOME_POSITION" Params="返回原点"/>
                        </x:Array>
                    </DataGrid.ItemsSource>
                </DataGrid>

                <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
                    <Button Content="添加步骤" Margin="5"/>
                    <Button Content="删除步骤" Margin="5"/>
                    <Button Content="上移" Margin="5"/>
                    <Button Content="下移" Margin="5"/>
                </StackPanel>
            </Grid>
        </GroupBox>

        <!-- 步骤详情编辑 -->
        <GroupBox Grid.Column="1" Header="步骤 3 详情: MOTION (压力控)">
            <StackPanel>
                <TextBlock Text="命令类型:" Margin="5"/>
                <ComboBox SelectedIndex="1" Margin="5,0,5,10">
                    <ComboBoxItem Content="MOTION"/>
                    <ComboBoxItem Content="TIMER"/>
                    <ComboBoxItem Content="LABEL"/>
                    <ComboBoxItem Content="JUMP"/>
                    <ComboBoxItem Content="WAIT"/>
                    <ComboBoxItem Content="MEASURE START/STOP"/>
                    <ComboBoxItem Content="HOME_POSITION"/>
                </ComboBox>

                <TextBlock Text="控制模式:" Margin="5"/>
                <ComboBox SelectedIndex="1" Margin="5,0,5,10">
                    <ComboBoxItem Content="位移控制 (保护力)"/>
                    <ComboBoxItem Content="压力控制 (触发力)"/>
                </ComboBox>

                <TextBlock Text="目标位移 (mm):" Margin="5"/>
                <TextBox Text="68.00" Margin="5,0,5,10"/>

                <TextBlock Text="触发压力 (N):" Margin="5"/>
                <TextBox Text="400" Margin="5,0,5,10"/>

                <TextBlock Text="最大速度 (%):" Margin="5"/>
                <TextBox Text="80" Margin="5,0,5,10"/>

                <Button Content="保 存" Style="{StaticResource StartButtonStyle}" Margin="5,20,5,5"/>
            </StackPanel>
        </GroupBox>
    </Grid>
</UserControl>